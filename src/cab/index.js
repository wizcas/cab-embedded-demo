!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(function(){return(()=>{"use strict";var e={595:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedApp=void 0;var a=n(174),s=n(375),c=o(n(258)),l=function(){function e(e){var t,n=this;this.registeredModals={},(0,s.validateEmbeddedAppConfig)(e),this.dispatch=this.dispatch.bind(this),this.subscribe=this.subscribe.bind(this),this.destroy=this.destroy.bind(this),this.subscribeToModalEvents=this.subscribeToModalEvents.bind(this),this.transport=new c.default({origin:e.origin,target:window.parent,serviceId:e.serviceId,logger:(0,s.logger)("embedded",e.debug)}),this.handshakePromise=new Promise((function(e){n.dispatch((0,a.createRegisterAction)()).then((function(){e()}))})),this.subscribe(a.BaseActionTypeEnum.HEARTBEAT,(function(){return!0})),this.autoResizeEnabled=null===(t=e.autoResize)||void 0===t||t,this.resizeObserver=new ResizeObserver((0,s.debounce)(this.handleResize.bind(this),50,!1)),this.resizeObserver.observe(document.documentElement),this.subscribeToModalEvents()}return e.create=function(t){return new e(t)},e.prototype.isReady=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){return[2,this.handshakePromise]}))}))},e.prototype.handleResize=function(e){if(this.autoResizeEnabled)for(var t=0,n=e;t<n.length;t++){var i=n[t];if(i.contentBoxSize){var r=Array.isArray(i.contentBoxSize)?i.contentBoxSize[0]:i.contentBoxSize;this.dispatch({type:a.RESIZE_FRAME,payload:{height:Math.ceil(r.blockSize)}},{oneway:!0})}else this.dispatch({type:a.RESIZE_FRAME,payload:{height:Math.ceil(i.contentRect.height)}},{oneway:!0})}},e.prototype.toggleAutoResize=function(e){this.autoResizeEnabled=e},e.prototype.subscribeToModalEvents=function(){var e=this;this.subscribe("MODAL_CLOSE",(function(t){var n,i,r,o,s,c,l=t.id,u=t.trigger,d=e.registeredModals[l];"closeButton"===u?null===(r=null===(i=null===(n=null==d?void 0:d.header)||void 0===n?void 0:n.closeButton)||void 0===i?void 0:i.onClick)||void 0===r||r.call(i):null===(c=null===(s=null===(o=d.footer)||void 0===o?void 0:o[u])||void 0===s?void 0:s.onClick)||void 0===c||c.call(s),d.destroyOnClose&&(e.dispatch((0,a.createModalDestroyAction)(l),{oneway:!0}),delete e.registeredModals[l])}))},e.prototype.dispatch=function(e,t){return i(this,void 0,void 0,(function(){return r(this,(function(n){return"MODAL_REGISTER"===e.type&&(this.registeredModals[e.payload.id]=e.payload),[2,this.transport.sendRequest(e,t)]}))}))},e.prototype.subscribe=function(e,t){return this.transport.registerHandler(e,t)},e.prototype.destroy=function(){var e=Object.keys(this.registeredModals);this.dispatch({type:"MODAL_DESTROY",payload:{ids:e}},{oneway:!0}),this.transport.teardown(),this.resizeObserver.disconnect()},e}();t.EmbeddedApp=l},447:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var r=n(174),o=n(375),a=function(){function e(e,t){this.app=e,this.id=(0,o.uid)(),this.open=this.open.bind(this),this.destroy=this.destroy.bind(this),this.app.dispatch((0,r.createModalRegisterAction)(i(i({},t),{id:this.id})))}return e.create=function(t,n){return new e(t,n)},e.prototype.open=function(){this.app.dispatch((0,r.createModalOpenAction)(this.id))},e.prototype.close=function(){this.app.dispatch((0,r.createModalCloseAction)(this.id,"closeButton"))},e.prototype.destroy=function(){this.app.dispatch((0,r.createModalDestroyAction)(this.id))},e}();t.Modal=a},268:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var i=n(447);Object.defineProperty(t,"Modal",{enumerable:!0,get:function(){return i.Modal}})},954:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ParentApp=void 0;var a=n(174),s=n(375),c=o(n(258)),l=n(579),u=n(375),d=function(){function e(e){var t=this;this.config=e,this.isPositionReportingEnabled=!1,this.heartbeatTimer=null,(0,s.validateParentAppConfig)(e);var n=(0,s.setupIframe)(e),i=new URL(e.iframeUrl).origin;this.transport=new c.default({origin:i,target:n.contentWindow,serviceId:e.serviceId,logger:(0,s.logger)("parent",e.debug)}),this.dispatch=this.dispatch.bind(this),this.subscribe=this.subscribe.bind(this),this.destroy=this.destroy.bind(this),this.handshakePromise=new Promise((function(e){t.subscribe("REGISTER",(function(){return e(!0)}))})).then((function(){return t.heartbeatTimer=t.startHeartbeat(),t.isPositionReportingEnabled=!0,!0})),this.throttledPositionChange=(0,u.throttle)(this.handlePositionChange.bind(this),20).bind(this),document.addEventListener("scroll",this.throttledPositionChange,!0),window.addEventListener("resize",this.throttledPositionChange),this.resizeObserver=new ResizeObserver(this.throttledPositionChange),this.iframeEl&&this.resizeObserver.observe(this.iframeEl),this.subscribe("RESIZE_FRAME",(function(e){void 0===e&&(e={}),t.iframeEl&&"number"==typeof e.height&&(t.iframeEl.style.minHeight=e.height.toString()+"px")}))}return e.create=function(t){return new e(t)},e.prototype.handlePositionChange=function(){if(this.isPositionReportingEnabled&&this.iframeEl){var e=this.iframeEl.getBoundingClientRect(),t={top:e.top,left:e.left,width:e.width,height:e.height,viewportHeight:window.innerHeight,viewportWidth:window.innerWidth};(0,u.hasPositionChanged)(t,this._framePosition)&&(this.dispatch((0,a.createPositionAction)(t),{oneway:!0}),this._framePosition=t)}},Object.defineProperty(e.prototype,"iframeEl",{get:function(){return document.getElementById((0,s.getIframeId)(this.config.serviceId))},enumerable:!1,configurable:!0}),e.prototype.startHeartbeat=function(){var e=this,t=0,n=setInterval((function(){return i(e,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.dispatch({type:a.BaseActionTypeEnum.HEARTBEAT},{timeoutDuration:this.config.heartbeatCbTimeoutMs})];case 2:if(!e.sent())throw"Client unresponsive";return t=0,[3,4];case 3:return e.sent(),t++,[3,4];case 4:return t>=l.HEARTBEAT_RETRY_COUNT&&(clearInterval(n),this.transport.emit(new a.ErrorAction({type:a.ErrorActionType.HEARTBEAT_STOPPED,payload:{message:"embedded app heartbeat stopped"}}))),[2]}}))}))}),2e3);return n},e.prototype.isReady=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){return[2,this.handshakePromise]}))}))},e.prototype.togglePositionReporting=function(e){this.isPositionReportingEnabled=e},e.prototype.dispatch=function(e,t){return i(this,void 0,void 0,(function(){return r(this,(function(n){return[2,this.transport.sendRequest(e,t)]}))}))},e.prototype.subscribe=function(e,t){return this.transport.registerHandler(e,t)},e.prototype.destroy=function(){var e;this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.isPositionReportingEnabled=!1,this.transport.teardown(),this.resizeObserver.disconnect(),document.removeEventListener("scroll",this.throttledPositionChange,!0),window.removeEventListener("resize",this.throttledPositionChange);var t=this.iframeEl;t&&(null===(e=t.parentNode)||void 0===e||e.removeChild(t))},e}();t.ParentApp=d},258:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(174),s=n(375),c=n(579),l=function(){function e(e){this.config=e,this.messageId=1,this.messages={},this.handlers={},this.sendRequest=this.sendRequest.bind(this),this.handleMessage=this.handleMessage.bind(this),this.handleResponse=this.handleResponse.bind(this),this.registerHandler=this.registerHandler.bind(this),this.postMessage=this.postMessage.bind(this),this.setOriginListeners=e.onSetOrigin?[e.onSetOrigin]:[],window.addEventListener("message",this.handleMessage)}return e.prototype.postMessage=function(e){var t,n,i,r=(0,s.serializeMessage)(e);this.config.target.postMessage(r,this.config.origin||"*"),null===(i=null===(n=null===(t=this.config)||void 0===t?void 0:t.logger)||void 0===n?void 0:n.messageSent)||void 0===i||i.call(n,e)},e.prototype.handleResponse=function(e){var t,n,i=e.messageId;if(i){var r=null===(n=(t=this.messages)[i])||void 0===n?void 0:n.call(t,e);return delete this.messages[i],r}},e.prototype.addSetOriginListener=function(e){this.setOriginListeners.push(e)},e.prototype.setOrigin=function(e){this.config.origin=e;for(var t=0,n=this.setOriginListeners;t<n.length;t++)(0,n[t])(e);this.setOriginListeners=[]},e.prototype.handleMessage=function(e){var t,n,l;return r(this,void 0,void 0,(function(){var r,u,d,p,h;return o(this,(function(o){switch(o.label){case 0:if(!(r=(0,s.sanitizeMessage)(e,this.config)))return[2];if(this.config.origin||this.setOrigin(e.origin),null===(l=null===(n=null===(t=this.config)||void 0===t?void 0:t.logger)||void 0===n?void 0:n.messageRecieved)||void 0===l||l.call(n,r),r.messageType===c.MessageTypes.RESPONSE)return[2,this.handleResponse(r)];if(r.error)return[3,4];d=this.handlers[r.type]||function(){},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,d(r.payload)];case 2:return u=o.sent(),[3,4];case 3:return p=o.sent(),r.error=new a.ErrorAction({type:a.ErrorActionType.UNKNOWN,payload:p}),[3,4];case 4:return r.messageType===c.MessageTypes.ONEWAY||(h=i(i({},r),{messageType:c.MessageTypes.RESPONSE,payload:u}),this.postMessage(h)),[2]}}))}))},e.prototype.sendRequest=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,(function(){var n,r,l,u,d,p,h,f=this;return o(this,(function(o){if(n=t.oneway,r=void 0!==n&&n,l=t.timeoutDuration,u=void 0===l?c.DEFAULT_TIMEOUT:l,!(0,s.isValidActionType)(e.type))throw"Invalid action type: "+e.type;return d=this.messageId,p=i(i({},e),{messageId:d,serviceId:this.config.serviceId,messageType:r?c.MessageTypes.ONEWAY:c.MessageTypes.REQUEST}),this.postMessage(p),this.messageId++,r?[2]:(h=new Promise((function(e,t){f.messages[d]=function(n){n.error&&t(n.error),e(n.payload)}})),[2,(A=h,E=u,g=new Promise((function(t,n){return y=setTimeout((function(){delete f.messages[d],n(new a.ErrorAction({payload:{message:"Timeout Error: Request timeout for action: "+JSON.stringify(e)},type:a.ErrorActionType.TIMEOUT}))}),E)})),Promise.race([A,g]).finally((function(){return clearTimeout(y)})))]);var A,E,y,g}))}))},e.prototype.registerHandler=function(e,t){var n,i,r,o=this;if(!(0,s.isValidActionType)(e)){var c=this.handlers[a.ErrorActionType.INVALID_ACTION_TYPE];try{c()}catch(t){throw new a.ErrorAction({type:a.ErrorActionType.INVALID_ACTION_TYPE,payload:{message:"Invalid action type: "+e}})}}return this.handlers[e]=t,null===(r=null===(i=null===(n=this.config)||void 0===n?void 0:n.logger)||void 0===i?void 0:i.info)||void 0===r||r.call(i,"Handler added for action type: "+e),function(){return delete o.handlers[e]}},e.prototype.emit=function(e){var t,n,i,r=e.type,o=e.payload;null===(i=null===(n=null===(t=this.config)||void 0===t?void 0:t.logger)||void 0===n?void 0:n.info)||void 0===i||i.call(n,"Emitting action: "+{type:r,payload:o});var a=this.handlers[r];a&&a(o)},e.prototype.teardown=function(){window.removeEventListener("message",this.handleMessage)},e}();t.default=l},377:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorAction=t.ErrorActionType=void 0,(n=t.ErrorActionType||(t.ErrorActionType={})).TIMEOUT="TIMEOUT",n.INVALID_PAYLOAD="INVALID_PAYLOAD",n.NETWORK="NETWORK",n.PERMISSION="PERMISSION",n.FAILED_AUTHENTICATION="FAILED_AUTHENTICATION",n.INVALID_ACTION="INVALID_ACTION",n.INVALID_ACTION_TYPE="INVALID_ACTION_TYPE",n.MISSING_ACTION_TYPE="MISSING_ACTION_TYPE",n.INVALID_NAVIGATION_TYPE="INVALID_NAVIGATION_TYPE",n.INVALID_MESSAGE_TYPE="INVALID_MESSAGE_TYPE",n.MISSING_MESSAGE_TYPE="MISSING_MESSAGE_TYPE",n.INVALID_OPTIONS="INVALID_OPTIONS",n.UNEXPECTED_ACTION="UNEXPECTED_ACTION",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.INVALID_ORIGIN="INVALID_ORIGIN",n.INVALID_CONFIG="INVALID_CONFIG",n.MISSING_CONFIG="MISSING_CONFIG",n.IFRAME_UNDEFINED="IFRAME_UNDEFINED",n.MISSING_LOCAL_ORIGIN="MISSING_LOCAL_ORIGIN",n.MISSING_HOST_PROVIDER="MISSING_HOST_PROVIDER",n.MISSING_ROUTER_CONTEXT="MISSING_ROUTER_CONTEXT",n.MISSING_HISTORY_BLOCK="MISSING_HISTORY_BLOCK",n.UNKNOWN="UNKNOWN",n.HEARTBEAT_STOPPED="HEARTBEAT_STOPPED",n.HEARTBEAT_TIMEOUT="HEARTBEAT_TIMEOUT";t.ErrorAction=function(e){this.type=e.type,this.payload=e.payload}},419:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createPositionAction=t.createHistoryReplaceAction=t.createHistoryPushAction=t.createModalDestroyAction=t.createModalCloseAction=t.createModalOpenAction=t.createModalRegisterAction=t.createNavigateAction=t.createAddToastAction=t.createResizeFrameAction=t.createGetResourceAction=t.createAutoScrollAction=t.createFullWindowAction=t.createErrorAction=t.createContentReadyAction=t.createAuthAction=t.createRegisterAction=t.availableActionTypes=t.BaseActionTypeEnum=t.NAVIGATE_BLANK=t.NAVIGATE_PARENT=t.POSITION_CHANGE=t.HISTORY_PUSH=t.HISTORY_REPLACE=t.MODAL_DESTROY=t.MODAL_CLOSE=t.MODAL_OPEN=t.MODAL_REGISTER=t.NAVIGATE=t.ADD_TOAST=t.GET_RESOURCE=t.AUTO_SCROLL=t.FULL_WINDOW=t.CONTENT_READY=t.RESIZE_FRAME=t.ERROR=t.AUTHENTICATE=t.REGISTER=void 0;var o,a=n(377);t.REGISTER="REGISTER",t.AUTHENTICATE="AUTHENTICATE",t.ERROR="ERROR",t.RESIZE_FRAME="RESIZE_FRAME",t.CONTENT_READY="CONTENT_READY",t.FULL_WINDOW="FULL_WINDOW",t.AUTO_SCROLL="AUTO_SCROLL",t.GET_RESOURCE="GET_RESOURCE",t.ADD_TOAST="ADD_TOAST",t.NAVIGATE="NAVIGATE",t.MODAL_REGISTER="MODAL_REGISTER",t.MODAL_OPEN="MODAL_OPEN",t.MODAL_CLOSE="MODAL_CLOSE",t.MODAL_DESTROY="MODAL_DESTROY",t.HISTORY_REPLACE="HISTORY_REPLACE",t.HISTORY_PUSH="HISTORY_PUSH",t.POSITION_CHANGE="POSITION_CHANGE",t.NAVIGATE_PARENT="parent",t.NAVIGATE_BLANK="blank",function(e){e.HEARTBEAT="HEARTBEAT"}(o=t.BaseActionTypeEnum||(t.BaseActionTypeEnum={})),t.availableActionTypes=[t.REGISTER,t.AUTHENTICATE,t.ERROR,t.CONTENT_READY,t.FULL_WINDOW,t.AUTO_SCROLL,t.GET_RESOURCE,t.RESIZE_FRAME,t.ADD_TOAST,t.NAVIGATE,t.MODAL_REGISTER,t.MODAL_OPEN,t.MODAL_CLOSE,t.MODAL_DESTROY,t.HISTORY_REPLACE,t.HISTORY_PUSH,t.POSITION_CHANGE].concat(Object.keys(a.ErrorActionType).filter((function(e){return isNaN(Number(e))}))).concat(Object.keys(o).filter((function(e){return isNaN(Number(e))}))),t.createRegisterAction=function(){return{type:t.REGISTER}},t.createAuthAction=function(e){return{type:t.AUTHENTICATE,payload:e}},t.createContentReadyAction=function(){return{type:t.CONTENT_READY}},t.createErrorAction=function(e){return{type:t.ERROR,payload:{message:e}}},t.createFullWindowAction=function(e){return{type:t.FULL_WINDOW,payload:{isFullWindow:e}}},t.createAutoScrollAction=function(e){return{type:t.AUTO_SCROLL,payload:{clientY:e}}},t.createGetResourceAction=function(e){return{type:t.GET_RESOURCE,payload:e}},t.createResizeFrameAction=function(e){return{type:t.RESIZE_FRAME,payload:e}},t.createAddToastAction=function(e,n,i){return{type:t.ADD_TOAST,payload:{variant:e,message:n,duration:i}}},t.createNavigateAction=function(e){return{type:t.NAVIGATE,payload:e}},t.createModalRegisterAction=function(e){return{type:t.MODAL_REGISTER,payload:e}},t.createModalOpenAction=function(e){return{type:t.MODAL_OPEN,payload:{id:e}}},t.createModalCloseAction=function(e,n){return{type:t.MODAL_CLOSE,payload:{id:e,trigger:n}}},t.createModalDestroyAction=function(e){return{type:t.MODAL_DESTROY,payload:{ids:[e]}}},t.createHistoryPushAction=function(e){return{type:t.HISTORY_PUSH,payload:e}},t.createHistoryReplaceAction=function(e){return{type:t.HISTORY_REPLACE,payload:e}},t.createPositionAction=function(e){return{type:t.POSITION_CHANGE,payload:e}},r(n(377),t)},174:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(419),t)},579:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.COMPASS_MSG_PREFIX=t.HEARTBEAT_RETRY_COUNT=t.DEFAULT_TIMEOUT=t.MessageTypes=void 0,t.MessageTypes={REQUEST:"REQUEST",RESPONSE:"RESPONSE",ONEWAY:"ONEWAY"},t.DEFAULT_TIMEOUT=500,t.HEARTBEAT_RETRY_COUNT=3,t.COMPASS_MSG_PREFIX="COMPASS_APP::"},375:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(378),t)},378:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasPositionChanged=t.uid=t.navigateToUrl=t.toggleAutoScroll=t.toggleFullWindow=t.isInIframe=t.throttle=t.debounce=t.validateEmbeddedAppConfig=t.validateParentAppConfig=t.setupIframe=t.getIframeId=t.logger=t.sanitizeMessage=t.validatePacketContents=t.isValidMessageEvent=t.serializeMessage=t.isValidActionType=void 0;var r=n(174),o=n(579);function a(e){return/^[a-z]+(-[a-z]+)*$/.test(e)}function s(e){return e+"_iframe"}t.isValidActionType=function(e){return r.availableActionTypes.includes(e)},t.serializeMessage=function(e){var t=JSON.stringify(e);return""+o.COMPASS_MSG_PREFIX+t},t.isValidMessageEvent=function(e,t){return!(t.origin&&e.origin!==t.origin||"string"!=typeof e.data||!e.data.startsWith(o.COMPASS_MSG_PREFIX))},t.validatePacketContents=function(e,n){if((null==e?void 0:e.serviceId)===n.serviceId)return e.type?(null==e?void 0:e.messageType)?(0,t.isValidActionType)(e.type)?e:i(i({},e),{error:new r.ErrorAction({type:r.ErrorActionType.INVALID_ACTION_TYPE,payload:{message:"Invalid Packet: Invalid action type"}})}):i(i({},e),{error:new r.ErrorAction({type:r.ErrorActionType.MISSING_MESSAGE_TYPE,payload:{message:"Invalid Packet: Missing message type"}})}):i(i({},e),{error:new r.ErrorAction({type:r.ErrorActionType.MISSING_ACTION_TYPE,payload:{message:"Invalid Packet: Missing action type"}})})},t.sanitizeMessage=function(e,n){var i,r;if((0,t.isValidMessageEvent)(e,n)){var o=null===(r=null===(i=e.data)||void 0===i?void 0:i.split("::"))||void 0===r?void 0:r[1];if(o){var a=JSON.parse(o);if((null==a?void 0:a.serviceId)===n.serviceId)return(0,t.validatePacketContents)(a,n)}}},t.logger=function(e,t){return void 0===t&&(t=!1),{messageRecieved:function(n){t&&(console.groupCollapsed("Recieved message in "+e+":",(new Date).toLocaleTimeString()),console.info("Message: ",JSON.stringify(n)),console.groupEnd())},messageSent:function(n){t&&(console.groupCollapsed("Sending message from "+e+":",(new Date).toLocaleTimeString()),console.info("Message: ",JSON.stringify(n)),console.groupEnd())},info:function(e){t&&console.info(JSON.stringify(e))}}},t.getIframeId=s,t.setupIframe=function(e){var t=document.querySelector(e.containerSelector),n=document.createElement("iframe");return n.style.border="0px",n.style.width="100%",n.style.height="100%",n.id=s(e.serviceId),n.src=e.iframeUrl,null==t||t.appendChild(n),n},t.validateParentAppConfig=function(e){if(!document.querySelector(e.containerSelector))throw new r.ErrorAction({type:r.ErrorActionType.IFRAME_UNDEFINED,payload:{message:"Failed to initialize Parent App: No element found for selector "+e.containerSelector}});if(!a(e.serviceId))throw new r.ErrorAction({type:r.ErrorActionType.INVALID_CONFIG,payload:{message:"Failed to initialize Parent App: Invalid service-id: "+e.serviceId+" (Must be dash case)"}})},t.validateEmbeddedAppConfig=function(e){if(!a(e.serviceId))throw new r.ErrorAction({type:r.ErrorActionType.INVALID_CONFIG,payload:{message:"Failed to initialize Embedded App: Invalid service-id: "+e.serviceId+" (Must be dash case)"}})},t.debounce=function(e,t,n){var i;return function(){var r=this,o=arguments;function a(){i=null,n||e.apply(r,o)}var s=n&&!i;i&&clearTimeout(i),i=setTimeout(a,t),s&&e.apply(r,o)}},t.throttle=function(e,t,n){var i,r,o;void 0===n&&(n={leading:!0,trailing:!0});var a=null,s=0;function c(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(i,r),a||(i=r=null)}return n||(n={}),function(){var l=Date.now();s||!1!==n.leading||(s=l);var u=t-(l-s);return i=this,r=arguments,u<=0||u>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(c,u)),o}},t.isInIframe=function(){return window.top!==window},t.toggleFullWindow=function(e,t){void 0===t&&(t=1e3);var n={};return function(i){var r,o=i.isFullWindow,a=s(e),c=document.getElementById(a);if(!c)throw"Invalid serviceId provided to FULL_WINDOW subscriber";if(o)return n[a]||(n[a]={height:c.style.height||null,minHeight:c.style.minHeight||null,maxHeight:c.style.maxHeight||null}),c.style.position="fixed",c.style.height="100vh",c.style.minHeight="100vh",c.style.maxHeight="100vh",c.style.width="100vw",c.style.left="0",c.style.top="0",void(c.style.zIndex=t.toString());var l=n[a];delete n[a],c.style.removeProperty("position"),c.style.height=null!==(r=null==l?void 0:l.height)&&void 0!==r?r:"100%",(null==l?void 0:l.minHeight)&&(c.style.minHeight=l.minHeight),(null==l?void 0:l.maxHeight)&&(c.style.maxHeight=l.maxHeight),c.style.width="100%",c.style.removeProperty("left"),c.style.removeProperty("top"),c.style.zIndex=""}},t.toggleAutoScroll=function(e,t){return function(n){var i=n.clientY,r=s(e),o=document.getElementById(r);if(!o)throw"Invalid serviceId provided to AUTO_SCROLL subscriber";var a=t?document.getElementById(t):window;if(!a)throw"ParentId given for AUTO_SCROLL subscriber not found on document";var c=o.getBoundingClientRect().top,l=t?document.getElementById(t).scrollHeight:Math.max(document.body.scrollHeight,document.body.offsetHeight,document.body.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),u=document.documentElement.clientHeight,d=u-80,p=l-u,h=t?document.getElementById(t).scrollTop:window.pageYOffset,f=h;i+c<80&&h>0?f-=(80-(i+c))/80*10:i+c>d&&h<p&&(f+=(i+c-d)/80*10),f=Math.max(0,Math.min(p,f)),a.scrollTo(0,f)}},t.navigateToUrl=function(e){if(e.target===r.NAVIGATE_BLANK)window.open(e.url).focus();else{if(e.target!==r.NAVIGATE_PARENT)throw new r.ErrorAction({type:r.ErrorActionType.INVALID_NAVIGATION_TYPE,payload:{message:"Invalid payload target type: "+e.target}});window.location.assign(e.url)}},t.uid=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)},t.hasPositionChanged=function(e,t){if(!t)return!0;for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(Math.floor(e[r])!==Math.floor(t[r]))return!0}return!1}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorActionType=e.MODAL_DESTROY=e.MODAL_REGISTER=e.MODAL_OPEN=e.MODAL_CLOSE=e.toggleAutoScroll=e.navigateToUrl=e.toggleFullWindow=e.isInIframe=e.createHistoryPushAction=e.createHistoryReplaceAction=e.createModalCloseAction=e.createNavigateAction=e.createAutoScrollAction=e.createAddToastAction=e.createGetResourceAction=e.createFullWindowAction=e.createErrorAction=e.createContentReadyAction=e.createAuthAction=e.createRegisterAction=e.Modal=e.ParentApp=e.EmbeddedApp=void 0;var t=n(595);Object.defineProperty(e,"EmbeddedApp",{enumerable:!0,get:function(){return t.EmbeddedApp}});var r=n(954);Object.defineProperty(e,"ParentApp",{enumerable:!0,get:function(){return r.ParentApp}});var o=n(268);Object.defineProperty(e,"Modal",{enumerable:!0,get:function(){return o.Modal}});var a=n(174);Object.defineProperty(e,"createRegisterAction",{enumerable:!0,get:function(){return a.createRegisterAction}}),Object.defineProperty(e,"createAuthAction",{enumerable:!0,get:function(){return a.createAuthAction}}),Object.defineProperty(e,"createContentReadyAction",{enumerable:!0,get:function(){return a.createContentReadyAction}}),Object.defineProperty(e,"createErrorAction",{enumerable:!0,get:function(){return a.createErrorAction}}),Object.defineProperty(e,"createFullWindowAction",{enumerable:!0,get:function(){return a.createFullWindowAction}}),Object.defineProperty(e,"createAutoScrollAction",{enumerable:!0,get:function(){return a.createAutoScrollAction}}),Object.defineProperty(e,"createGetResourceAction",{enumerable:!0,get:function(){return a.createGetResourceAction}}),Object.defineProperty(e,"createAddToastAction",{enumerable:!0,get:function(){return a.createAddToastAction}}),Object.defineProperty(e,"createNavigateAction",{enumerable:!0,get:function(){return a.createNavigateAction}}),Object.defineProperty(e,"createModalCloseAction",{enumerable:!0,get:function(){return a.createModalCloseAction}}),Object.defineProperty(e,"createHistoryPushAction",{enumerable:!0,get:function(){return a.createHistoryPushAction}}),Object.defineProperty(e,"createHistoryReplaceAction",{enumerable:!0,get:function(){return a.createHistoryReplaceAction}}),Object.defineProperty(e,"MODAL_DESTROY",{enumerable:!0,get:function(){return a.MODAL_DESTROY}}),Object.defineProperty(e,"MODAL_OPEN",{enumerable:!0,get:function(){return a.MODAL_OPEN}}),Object.defineProperty(e,"MODAL_REGISTER",{enumerable:!0,get:function(){return a.MODAL_REGISTER}}),Object.defineProperty(e,"MODAL_CLOSE",{enumerable:!0,get:function(){return a.MODAL_CLOSE}}),Object.defineProperty(e,"ErrorActionType",{enumerable:!0,get:function(){return a.ErrorActionType}});var s=n(375);Object.defineProperty(e,"isInIframe",{enumerable:!0,get:function(){return s.isInIframe}}),Object.defineProperty(e,"toggleFullWindow",{enumerable:!0,get:function(){return s.toggleFullWindow}}),Object.defineProperty(e,"navigateToUrl",{enumerable:!0,get:function(){return s.navigateToUrl}}),Object.defineProperty(e,"toggleAutoScroll",{enumerable:!0,get:function(){return s.toggleAutoScroll}})})(),i})()}));